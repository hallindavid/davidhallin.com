<!DOCTYPE html>
<html>
{{ partial "header.html" . }}
<body>
<div class="site-shell">
    {{ partial "nav.html" . }}
    <main class="site-frame layout-grid">
        <aside class="docs-sidebar">
            <h2 class="sidebar-title">Sections</h2>
            <ul class="sidebar-list">
                {{ range .Site.Menus.main }}
                <li>
                    <a href="{{ .URL }}" class="sidebar-link{{ if eq $.RelPermalink .URL }} sidebar-link-active{{ end }}">{{ .Name }}</a>
                </li>
                {{ end }}
            </ul>
        </aside>
        <section class="docs-panel">
            <header class="panel-header">
                <h1>Blog Posts</h1>
                {{- if isset .Site.Params "subtitle" -}}
                <p>{{ .Site.Params.Subtitle | markdownify }}</p>
                {{- end -}}
            </header>
            <div class="posts">
                {{ $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}
                {{ $paginator := .Paginate (where $pages "Params.hidden" "ne" true) }}
                {{ range $paginator.Pages }}
                <article class="post-card">
                    <div class="post-meta">
                        {{ if $.Site.Data.month }}{{ index $.Site.Data.month (printf "%d" .Date.Month) }} {{ .Date.Day }}, {{ .Date.Year }}{{ else }}{{ dateFormat "Jan 2, 2006" .Date }}{{ end }}
                    </div>
                    <h2 class="post-title">
                        <a href="{{ .RelPermalink }}">{{.Title}}{{ if .Draft }}<sup class="text-red-600">[DRAFT]</sup>{{ end }}</a>
                    </h2>
                    <p class="post-description">
                        {{ if isset .Params "description" }}
                        {{ .Description }}
                        {{ else if gt (countrunes .RawContent) 140 }}
                        {{ slicestr .RawContent 0 140 }}...
                        {{ else }}
                        {{ .RawContent }}
                        {{ end }}
                    </p>
                </article>
                {{ end }}
                {{ template "partials/paginator.html" . }}
            </div>
        </section>
    </main>
    {{ partial "footer.html" . }}
</div>
</body>
</html>
